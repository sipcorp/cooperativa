<!DOCTYPE html>
<html>
<% include ./partials/head %>
<link href="css/caja/caja.css" rel="stylesheet">

<body class="header-sticky sidebar-left sidebar-hidden" ng-app="startAPP" ng-cloak>
    <div class="page-container">
        <% include ./partials/header %>
        <!--CONTENIDO-->
        <div id="main-container">
            <!--MENU LEFT-->

            <div id="main-content" class="main-content container-fluid" ng-controller="cajaController">
                <input id='startCashier' type="hidden" readonly value="{{startCashier}}" />
                <input id="user" type="hidden" readonly value="<%=user.userCode%>">

                <div class="filler filler"></div>
                <div id="page-content" class="page-content">
                    <nav>
                        <ul class="btn-toolbar page-nav margin-btn nav nav-tabs">
                            <li>
                                <a class="btn btn-well btn-glyph" href="#TabTop1" data-toggle="tab" style="width: 80px">
                                    <i class="fas fa-cash-register fa-3x"></i>
                                    <span class="block">CAJA</span>
                                </a>
                            </li>
                            <li>
                                <a class="btn btn-well btn-glyph" href="#TabTop2" data-toggle="tab" style="width: 80px"
                                    ng-click="loadInvoice()">
                                    <i class="fas fa-file-invoice-dollar fa-3x"></i>
                                    <span class="block">FACTURAS</span>
                                </a>
                            </li>
                            <li>
                                <a class="btn btn-well btn-glyph" href="#TabTop3" data-toggle="tab" style="width: 80px">
                                    <i class="fontello-icon-list-add f30"></i>
                                    <span class="block">ARQUEO</span>
                                </a>
                            </li>
                            <!-- <li class="openCashier">
                                <a class="btn btn-well btn-glyph" data-toggle="modal" data-target="#openCashier"
                                    style="width: 80px">
                                    <i class="fas fa-wallet fa-3x"></i>
                                    <span class="block">CAJA INICIAL</span>
                                </a>
                            </li> -->
                            <li>
                                <a class="btn btn-well btn-glyph" href="#TabTop5" data-toggle="tab" style="width: 80px">
                                    <i class="fas fa-file-signature fa-3x"></i>
                                    <span class="block">REPORTE</span>
                                </a>
                            </li>

                        </ul>
                        <hr class="margin-0x">
                    </nav>
                    <div class="tab-content">
                        <!--  tab 1 -->
                        <div class="tab-pane mt-1" id="TabTop1">
                            <section>
                                <div class="row-fluid">
                                    <div class="span12">
                                        <table id="DT" class="table table-striped table-hover">
                                            <caption>
                                                Jueves, 23 de Marzo del 2019
                                            </caption>
                                            <thead>
                                                <tr>
                                                    <th scope="col">ID <span class="column-sorter"></span></th>
                                                    <th scope="col">Cajero<span class="column-sorter"></span></th>
                                                    <th scope="col">Apertura<span class="column-sorter"></span></th>
                                                    <th scope="col">Monto inicial<span class="column-sorter"></span>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-model="modelCashier">
                                                    <td>1
                                                        <input id="cajaId" type="hidden" readonly value="{{cajaID}}">
                                                    </td>
                                                    <td>{{cajero}}</td>
                                                    <td>{{date | date : format : timezone}}</td>
                                                    <td>{{startCashier | currency}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <!-- // DATATABLE Base - DT -->

                                    </div>
                                    <!-- // Column -->

                                </div>
                                <!-- // Example row -->

                            </section>


                        </div>

                        <!--  tab 2 -->
                        <div class="tab-pane mt-2" id="TabTop2">
                            <section>
                                <div class="row-fluid">
                                    <div class="span10 offset1">
                                        <table id="DTA"
                                            class="table table-bordered table-condensed table-hover bg-white75"
                                            data-provides="rowlink">
                                            <caption class="date-caption">
                                                Facturas por cobrar
                                            </caption>
                                            <thead>
                                                <tr>
                                                    <th scope="col" style="width: 30px !important">N°<span
                                                            class="column-sorter"></span></th>
                                                    <th scope="col" style="width: 228px !important">Código<span
                                                            class="column-sorter"></span></th>
                                                    <th scope="col">Cliente<span class="column-sorter"></span></th>
                                                    <th scope="col">Total<span class="column-sorter"></span></th>
                                                    <th scope="col">Fecha<span class="column-sorter"></span></th>
                                                    <th scope="col" style="width: 200px !important">Acciones<span
                                                            class="column-sorter"></span></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="facturas in facturaDelDia">
                                                    <td>{{$index + 1}}</td>
                                                    <td>{{facturas.invoiceNum}}</td>
                                                    <td>{{facturas.name}}</td>
                                                    <td>{{facturas.total | currency}}</td>
                                                    <td>{{facturas.date | date}}</td>
                                                    <td>
                                                        <!-- <button href="#" class="btn btn-success btn-xs"
                                                            data-toggle="modal" data-target=".bs-example-modal-lg"
                                                            title="Ver Venta">
                                                            <i class="fa fa-search-plus"></i>
                                                        </button> -->
                                                        <button href="#" class="btn btn-warning btn-xs"
                                                            ng-click="open(facturas.invoiceNum)"
                                                            title="Factura de Venta">
                                                            <i class="fa fa-print"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <!-- // DATATABLE - DTA -->



                                    </div>
                                    <!-- // Column -->

                                </div>
                                <!-- // Example row -->

                            </section>

                        </div>

                        <!--  tab 3 -->
                        <div class="tab-pane mt-2" id="TabTop3">

                            <div class="row-fluid">

                                <!-- // Column -->
                                <div class="span2 well well-black well-small inline">
                                    <div class="">
                                        <span>Caja Inicial: </span>
                                        <span>$250.00</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary  float-rigth" ng-click="save()">
                                    <i class="fas fa-wallet"></i>
                                    <span>Salvar</span>
                                </button>
                            </div>
                            <div class="row-fluid">
                                <div class="span4">
                                    <h4>Detalle del Arqueo: BILLETES</h4>
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr id="HeadersRow0">
                                                <th scope="col" style="width: 30px">Denominacion</th>
                                                <th scope="col" style="width: 100px">Cantidad</th>
                                                <th scope="col" style="width: 50px">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="DataRow0">
                                                <td class="bold"><span>$1</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="dolarChange"
                                                        id="num_1" ng-blur="createCashier('1',dolarChange,'dtB')"></td>
                                                <td class="text-right">{{dolarChange | currency}}</td>
                                            </tr>
                                            <tr id="DataRow1">
                                                <td class="bold"><span>$5</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="cincoChange"
                                                        id="num_2" ng-blur="createCashier('5',cincoChange,'dtB')"></td>
                                                <td class="text-right">{{cincoChange * 5 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow2">
                                                <td class="bold"><span>$10</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="tenChange"
                                                        id="num_3" ng-blur="createCashier('10',tenChange,'dtB')"></td>
                                                <td class="text-right">{{tenChange * 10 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow3">
                                                <td class="bold"><span>$20</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="twoChange"
                                                        id="num_4" ng-blur="createCashier('20',twoChange,'dtB')"></td>
                                                <td class="text-right">{{twoChange * 20 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow4">
                                                <td class="bold"><span>$50</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="fiveChange"
                                                        id="num_5" ng-blur="createCashier('50',fiveChange,'dtB')"></td>
                                                <td class="text-right">{{fiveChange * 50 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow5">
                                                <td class="bold"><span>$100</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="Change"
                                                        id="num_6" ng-blur="createCashier('100',Change,'dtB')"></td>
                                                <td class="text-right">{{Change * 100 | currency}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- // Table -->
                                </div>
                                <div class="span4">
                                    <h4>Detalle del Arqueo: MONEDAS</h4>
                                    <table class="table table-striped table-hover">

                                        <thead>
                                            <tr id="HeadersRow0">
                                                <th scope="col" style="width: 30px">Denominacion</th>
                                                <th scope="col" style="width: 100px">Cantidad</th>
                                                <th scope="col" style="width: 50px">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="DataRow0">
                                                <td class="bold"><span>$0.01</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="centChange"
                                                        id="num_7" ng-blur="createCashier('0.01',centChange,'dtCo')">
                                                </td>
                                                <td class="text-right">{{centChange * 0.01 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow1">
                                                <td class="bold"><span>$0.05</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="fivesChange"
                                                        id="num_8" ng-blur="createCashier('0.05',fivesChange,'dtCo')">
                                                </td>
                                                <td class="text-right">{{fivesChange * 0.05 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow2">
                                                <td class="bold"><span>$0.10</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="diezChange"
                                                        id="num_9" ng-blur="createCashier('0.10',diezChange,'dtCo')">
                                                </td>
                                                <td class="text-right">{{diezChange * 0.10 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow3">
                                                <td class="bold"><span>$0.25</span></td>
                                                <td><input type="sipText" class="span12" value=""
                                                        ng-model="twofiveChange" id="num_10"
                                                        ng-blur="createCashier('0.25',twofiveChange,'dtCo')"></td>
                                                <td class="text-right">{{twofiveChange * 0.25 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow4">
                                                <td class="bold"><span>$0.50</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="fivelChange"
                                                        id="num_11" ng-blur="createCashier('0.50',fivelChange,'dtCo')">
                                                </td>
                                                <td class="text-right">{{fivelChange * 0.50 | currency}}</td>
                                            </tr>
                                            <tr id="DataRow5">
                                                <td class="bold"><span>$1</span></td>
                                                <td><input type="sipText" class="span12" value="" ng-model="theBoos"
                                                        id="num_12" ng-blur="createCashier('1',theBoos,'dtCo')"></td>
                                                <td class="text-right">{{theBoos | currency}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- // Table -->
                                </div>
                                <div class="span4">
                                    <h4>Detalle del Arqueo: CHEQUES</h4>
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr id="HeadersRow0">
                                                <th scope="col" style="width: 30px">
                                                    <a class="btn btn-sm fa-add" ng-click="addRow()">
                                                        <i class="fas fa-plus"></i>
                                                    </a>
                                                </th>
                                                <th scope="col" style="width: 30px">Cheque#</th>
                                                <th scope="col" style="width: 228px">Banco</th>
                                                <th scope="col" style="width: 100px">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="DataRow0" ng-repeat="cheque in chequeArray">
                                                <td class="action">
                                                    <span>
                                                        <a class="icon delete" href=""><i class="far fa-trash-alt f16"
                                                                title="delete"></i>
                                                        </a>
                                                    </span>
                                                </td>
                                                <td><input type="sipText" class="span12" ng-model="numq"
                                                        id="numq_{{$index}}"></td>
                                                <td><input type="sipText" class="span12" ng-model="nameCheq"></td>
                                                <td><input type="sipText" class="span12" format="currency"
                                                        ng-model="total" ng-blur="createChequeObj(numq,nameCheq,total)">
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- // Table -->
                                </div>
                            </div>

                        </div>

                    </div>

                </div>

                <!--CONTENIDO-->

                <!-- hide inject elements-->
                <div class="hide">
                    <!-- inject to DTB Table -->
                    <div class="DTB_toolBar">
                        <ul class="btn-toolbar pull-right">
                            <li><a class="btn btn-glyph"><i class="fugue-table"></i></a></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-pencil"></i>Table</a></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-plus"></i></a></li>
                            <li class="divider-vertical"></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-export"></i></a></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-excel"></i></a></li>
                            <li class="divider-vertical"></li>
                        </ul>
                    </div>
                    <!-- // inject -->

                    <div class="DTB_resetTable">
                        <ul class="btn-toolbar pull-right">
                            <li class="divider-vertical"></li>
                            <li><a href="javascript:void(0)" class="btn"><i class="fugue-arrow-circle"></i></a></li>
                        </ul>
                    </div>
                    <!-- // inject -->

                    <!-- inject to DTC Table -->
                    <div class="DTC_resetTable">
                        <ul class="btn-toolbar pull-right">
                            <li class="divider-vertical"></li>
                            <li><a href="javascript:void(0)" class="btn btn-grey"><i class="fugue-arrow-circle"></i></a>
                            </li>
                        </ul>
                    </div>
                    <div id="DTC_toolBar">
                        <ul class="btn-toolbar pull-left">
                            <li><a class="btn btn-glyph"><i class="fugue-table"></i></a></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-pencil"></i></a></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-plus"></i></a></li>
                            <li class="divider-vertical"></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-export"></i></a></li>
                            <li><a class="btn btn-glyph"><i class="fugue-table-excel"></i></a></li>
                        </ul>
                        <div class="btn-toolbar pull-right margin-00"><a href="javascript:void(0)"
                                class="btn btn-green ">NEW Contact</a> </div>
                    </div>
                    <div id="DTC_actionTable">
                        <div class="btn-toolbar">
                            <div class="action-select-wraper">
                                <select name="actionTable" id="actionTable" class="selectpicker margin-right5">
                                    <option value="">Select action...</option>
                                    <option value="validate">Validate</option>
                                    <option value="delete">Export</option>
                                    <option value="archiv">Archiv</option>
                                </select>
                                <button type="submit" class="btn btn-blue">Action</button>
                            </div>
                        </div>
                    </div>
                    <!-- // inject -->

                    <!-- inject to DTCF Table -->
                    <div id="DTCF_toolBar">
                        <ul class="btn-toolbar pull-right">
                            <li>
                                <button class="btn check-view" data-tableid="exampleDTCF">Cierre de Caja</button>
                            </li>
                            <li class="divider-vertical"></li>
                            <li><a href="javascript:void(0)" class="btn btn-green ">Apertura de Caja</a></li>
                            <li class="divider-vertical"></li>
                        </ul>
                    </div>
                </div>



                <!-- CAJA -->
                <div class="modal fade" id="openCashier" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                    aria-hidden="true" data-width="300" data-backdrop="static" data-keyboard="false">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header modal-header-primary">
                                <h4>APERTURA</h4>
                            </div>
                            <div class="modal-body">
                                <div class="col-md-12">
                                    <span>Monto:</span>
                                    <span>
                                        <input type="text" id="num_m" ng-model="startCashier" />
                                    </span>
                                    <button class="btn btn-block btn-info"
                                        ng-click="createCashier(0,startCashier,'st')"></button>
                                </div>
                                <!-- ends col-12 -->
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!-- FACTURA -->
                <div class="modal fade bd-example-modal-lg" id="invoiceCashier" tabindex="-1" role="dialog"
                    aria-labelledby="myLargeModalLabel" aria-hidden="true" data-width="1290">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="toolbar">
                                <div class="text-right">
                                    <button ng-click="print();" class="btn btn-info"><i class="fa fa-print"></i>
                                        Print</button>
                                    <!-- <button class="btn btn-info"><i class="fa fa-file-pdf-o"></i> Export as
                                        PDF</button> -->
                                </div>
                                <hr>
                            </div>
                            <div id="invoice">
                                <div class="invoice overflow-auto">
                                    <div style="min-width: 600px">
                                        <header>
                                            <div class="row-invoice">
                                                <div class="col">
                                                    <a target="_blank" href="https://lobianijs.com">
                                                        <img src="../img/logo2.png" data-holder-rendered="true" />
                                                    </a>
                                                </div>
                                                <div class="col company-details">
                                                    <h3 class="name">
                                                        <p>RES #IPACOOP-PJ-13-91</p>
                                                        <p>Provincia de Chiriqui</p>
                                                        <p>Distrito de Alanje,Guarumal</p>
                                                    </h3>

                                                </div>
                                            </div>
                                        </header>
                                        <main>
                                            <div class="row-invoice contacts">
                                                <div class="col invoice-to">
                                                    <div class="text-gray-light">CLIENTE:</div>
                                                    <h3 class="name">{{currentCustomer}}</h3>
                                                    <div><i>{{currentAddress}}</i> </div>
                                                    <div> <i> {{currentPhone}}</i> </div>
                                                </div>
                                                <div class="col invoice-details">
                                                    <h2> FACTURA #: <strong
                                                            style="color:tomato;">{{currentInvoiceNum}}</strong> </h2>
                                                    <div class="date">FECHA: {{currentDateInvoice}}</div>

                                                </div>
                                            </div>
                                            <table border="0" cellspacing="0" cellpadding="0">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th class="text-left uppercase">descripción</th>
                                                        <th class="text-right">PRECIO</th>
                                                        <th class="text-right">CANTIDAD</th>
                                                        <th class="text-right">TOTAL</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="info in currentInvoice[0].items">
                                                        <td class="no">{{$index + 1}}</td>
                                                        <td class="text-left">
                                                            <h3>
                                                                <a> {{info.name}}</a>
                                                            </h3>
                                                        </td>
                                                        <td class="unit">{{info.cost | currency}}</td>
                                                        <td class="qty">{{info.qty | number}}</td>
                                                        <td class="unit">{{info.price | currency}}</td>
                                                    </tr>

                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td colspan="2"></td>
                                                        <td colspan="2">SUBTOTAL</td>
                                                        <td>{{total | currency}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2"></td>
                                                        <td colspan="2">ITBMS</td>
                                                        <td>$0.00</td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2"></td>
                                                        <td colspan="2">GRAND TOTAL</td>
                                                        <td>{{total | currency}}</td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </main>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.modal -->

            </div>
            <% include ./partials/footer %>
            <% include ./partials/script %>
            <!-- Component -->
</body>

</html>